import './StockDetail.css'

import React, { useState, useRef, useEffect } from 'react';
import { useParams } from 'react-router-dom';
import { FastCommentsCommentWidget } from 'fastcomments-react'
import { getTopStockById } from 'helpers/api';

const StockDetail = () => {
  const navItems = [
    { id: '1', label: 'Company Summary' },
    { id: '2', label: 'AI Advisor' },
    { id: '3', label: 'Core Thesis- Shortened' },
    { id: '4', label: 'Alternative Data / Signals' },
    { id: '5', label: 'Counterpoints' },
    { id: '6', label: 'Download Full Stock Pitch' },
    { id: '7', label: 'User Comments' }
  ];

  const { stock_id } = useParams();
  const sectionsRef = useRef([]);
  const [activeItem, setActiveItem] = useState(navItems[0].id);
  const [iframeShow, setIframeShow] = useState(false);
  const [stockDetail, setStockDetail] = useState([]);

  const formatDate = () => {
    const currentDate = new Date();
    const options = { day: '2-digit', month: 'short', year: 'numeric' };
    return currentDate.toLocaleDateString('en-US', options);
  };

  const handleNavClick = (id) => {
    const sectionIndex = navItems.findIndex(item => item.id === id);
    sectionsRef.current[sectionIndex].scrollIntoView({ behavior: 'smooth' });
    setActiveItem(id);
  };

  useEffect(() => {
    if (activeItem === '2') {
      setIframeShow(true);
    }
  }, [activeItem]);

  useEffect(() => {
    const observerOptions = {
      root: null,
      rootMargin: '-70% 0px 0px 0px',
      threshold: 0.0,
    };

    const observerCallback = (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const index = sectionsRef.current.indexOf(entry.target);
          setActiveItem(navItems[index].id);
        }
      });
    };

    const observer = new IntersectionObserver(observerCallback, observerOptions);
    sectionsRef.current.forEach((section) => observer.observe(section));

    return () => {
      sectionsRef.current.forEach((section) => {
        if (section) {
          observer.unobserve(section);
        }
      });
    };
  }, []);

  useEffect(() => {
    const fetchTopStockById = async (stock_id) => {
      try {
        const response = await getTopStockById(stock_id);
        setStockDetail(response);
      } catch (err) {
        console.log(err);
      }
    };

    fetchTopStockById(stock_id);
  }, []);

  useEffect(() => {
    window.scrollTo(0, 0);
  }, []);

  return (
    <>
      <div className='detail-header-container container'>
        <div className='detail-header'>
          <header className='detail-content-container'>
            <div className='detail-container'>
              <picture className='detail-image-container'>
                <div className='detail-image-shadow'></div>
                <img src="https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,w=1167,h=198,q=80,blur=0/https://images.simplywall.st/asset/industry/5122000-choice2-main-header/1585186547117" srcSet="https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,w=1167,h=198,q=80,blur=0/https://images.simplywall.st/asset/industry/5122000-choice2-main-header/1585186547117 1167w,https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,w=992,h=198,q=80,blur=0/https://images.simplywall.st/asset/industry/5122000-choice2-main-header/1585186547117 992w,https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,w=768,h=228,q=80,blur=0/https://images.simplywall.st/asset/industry/5122000-choice2-main-header/1585186547117 768w,https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,w=576,h=276,q=80,blur=0/https://images.simplywall.st/asset/industry/5122000-choice2-main-header/1585186547117 576w" alt="company background image" className="detail-image"></img>
              </picture>
              <div className='header-description-container'>
                <div className='header-description-intro'>
                  <ul className='header-description-link'>
                    <li>
                      <a href="/main/stocks/1" className='child-link-0'>Stocks</a>
                    </li>
                    <li>/</li>
                    <li>
                      <a href="/main/stocks/1" className='child-link-1'>Media</a>
                    </li>
                  </ul>
                </div>
                <div className='logo-container'>
                  <div className='logo-container-1'>
                    <img src="https://simplywall.st/cdn-cgi/image/format=auto,fit=cover,q=80,blur=0/https://logo.clearbit.com/https://www.tripadvisor.com?size=112" alt="TRIP logo" className="sc-1dbr7bz-1 ejnZup" />
                  </div>
                  <div className='company-title-container'>
                    <h1 className='company-title'>
                      {stockDetail.name}
                    </h1>
                    <span>{stockDetail.description}</span>
                  </div>
                </div>
              </div>
            </div>
          </header>
          <div className='detail-header'>
            <div className='header-button-container'>
              <button className='stock-header-button watchlist'>
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" data-cy-id="outline-star" opacity="1" role="presentation" className="sc-1fw3rv4-0 fNZXbt"><path fillRule="evenodd" clipRule="evenodd" d="M13.3997 10.4935L12.0001 6.21582L10.6004 10.4935L6.09517 10.4935L9.73999 13.1232L8.34319 17.3922L12.0001 14.7538L15.6569 17.3922L14.2601 13.1232L17.9049 10.4935H13.3997ZM9.87544 9.49352H6.09517C5.12476 9.49352 4.72311 10.7367 5.51007 11.3045L8.56236 13.5067L7.39277 17.0813C7.09173 18.0013 8.14321 18.7696 8.92829 18.2032L12.0001 15.9869L15.0718 18.2032C15.8569 18.7696 16.9084 18.0013 16.6073 17.0813L15.4377 13.5067L18.49 11.3045C19.277 10.7367 18.8753 9.49352 17.9049 9.49352H14.1247L12.9505 5.90485C12.6499 4.98614 11.3502 4.98614 11.0496 5.90485L9.87544 9.49352Z"></path></svg>
                Add to watchlist (Alerts)
              </button>
              <button className='stock-header-button other'>Add to Portfolio</button>
              <button className='stock-header-button other'>Download Write-Up</button>
              <button className='stock-header-button other download'>
                <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" className="sc-9nudij-0 bwXXkQ"><path fillRule="evenodd" clipRule="evenodd" d="M6 12C6 11.4477 6.44772 11 7 11C7.55228 11 8 11.4477 8 12C8 12.5523 7.55228 13 7 13C6.44772 13 6 12.5523 6 12ZM11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12ZM17 11C16.4477 11 16 11.4477 16 12C16 12.5523 16.4477 13 17 13C17.5523 13 18 12.5523 18 12C18 11.4477 17.5523 11 17 11Z"></path></svg>
              </button>
            </div>
            <div className='header-info-container'>
              <div className='header-info-container1'>
                <div className='header-info-cell'>
                  <div className='cell-container'>
                    <p className='cell top'>LAST PRICE</p>
                  </div>
                  <div className='cell-container'>
                    <p className='cell bottom'>US${stockDetail.last_price}</p>
                  </div>
                </div>
                <div className='header-info-cell'>
                  <div className='cell-container'>
                    <p className='cell top'>MARKET CAP</p>
                  </div>
                  <div className='cell-container'>
                    <p className='cell bottom'>US${stockDetail.market_cap}</p>
                  </div>
                </div>
                <div className='header-info-cell'>
                  <div className='cell-container'>
                    <p className='cell top'>7D</p>
                  </div>
                  <div className='cell-container'>
                    <p className={`cell bottom percent ${stockDetail.sevend_value < 0 ? 'negative' : 'positive'}`}>{stockDetail.sevend_value}%</p>
                  </div>
                </div>
                <div className='header-info-cell'>
                  <div className='cell-container'>
                    <p className='cell top'>1Y</p>
                  </div>
                  <div className='cell-container'>
                    <p className={`cell bottom percent ${stockDetail.oney_value < 0 ? 'negative' : 'positive'}`}>{stockDetail.oney_value}%</p>
                  </div>
                </div>
                <div className='header-info-cell'>
                  <div className='cell-container'>
                    <p className='cell top'>Investor Score</p>
                  </div>
                  <div className='cell-container'>
                    <p className='cell bottom percent'>{stockDetail.score}</p>
                  </div>
                </div>
                <div className='price-chart-container'>
                  <svg y="0" x="0" width="177.6875" height="40" transform="translate(-6.755184594348223, 0)" className="sc-1unm0j1-1 jGImJs"><svg><path className="visx-linepath" d="M6.755184594348223,18.251121076233183L7.2082953509571555,18.59192825112108L7.661406107566089,18.340807174887892L8.114516864175023,16.78026905829596L8.567627620783956,18.286995515695065L9.926959890610757,17.103139013452914L10.38007064721969,11.560538116591925L10.833181403828624,11.811659192825108L11.286292160437558,7.614349775784751L11.73940291704649,9.246636771300448L13.551845943482224,8.941704035874434L14.004956700091158,9.659192825112106L14.45806745670009,8.798206278026903L14.911178213309025,8.224215246636769L16.270510483135823,8.690582959641258L16.72362123974476,8.421524663677127L17.17673199635369,9.1390134529148L17.629842752962624,9.121076233183857L18.08295350957156,8.511210762331835L19.44228577939836,8.744394618834075L19.895396536007294,9.408071748878923L20.348507292616226,9.210762331838563L20.80161804922516,10.017937219730939L21.25472880583409,9.587443946188342L22.614061075660896,9.51569506726457L23.06717183226983,9.228699551569502L23.52028258887876,9.408071748878923L23.973393345487693,8.99551569506726L24.426504102096626,8.188340807174884L25.785836371923427,7.327354260089684L26.23894712853236,7.578475336322868L26.692057885141296,6.914798206278022L27.145168641750228,6.394618834080716L27.59827939835916,6L28.957611668185965,6.717488789237666L29.410722424794894,7.022421524663678L29.86383318140383,7.273542600896856L30.316943938012763,7.381165919282509L32.12938696444849,7.560538116591923L32.58249772105743,7.506726457399105L33.035608477666365,7.596412556053806L33.488719234275294,8.690582959641258L33.94182999088423,8.367713004484305L35.30116226071103,8.708520179372194L35.75427301731997,8.941704035874434L36.207383773928896,9.766816143497753L36.66049453053783,8.78026905829596L37.11360528714677,9.26457399103139L38.47293755697356,11.524663677130041L38.9260483135825,12.008968609865468L39.379159070191434,11.66816143497758L39.83226982680036,11.937219730941703L40.28538058340929,12.313901345291477L41.64471285323609,11.381165919282509L42.09782360984504,10.37668161434977L42.550934366453966,10.32286995515695L43.004045123062895,10.161434977578475L43.45715587967183,7.991031390134529L44.81648814949864,8.798206278026903L45.26959890610757,10L45.7227096627165,10.017937219730939L46.17582041932543,9.605381165919278L46.62893117593437,10.968609865470851L47.98826344576116,11.488789237668161L48.4413742023701,11.524663677130041L48.894484958979035,24.65470852017937L49.34759571558797,24.385650224215247L49.80070647219691,24.618834080717487L51.1600387420237,23.793721973094165L51.61314949863264,22.699551569506724L52.06626025524156,23.345291479820624L52.519371011850495,23.70403587443946L52.97248176845944,24.762331838565018L54.33181403828623,24.13452914798206L54.78492479489517,24.600896860986545L55.238035551504105,24.260089686098656L55.691146308113034,25.3542600896861L56.14425706472196,25.139013452914792L57.95670009115771,25.08520179372197L58.409810847766636,25.06726457399103L58.86292160437557,25.06726457399103L59.3160323609845,24.313901345291477L60.6753646308113,24.47533632286995L61.12847538742024,24.905829596412556L61.581586144029174,25.264573991031387L62.03469690063811,24.13452914798206L62.48780765724703,23.90134529147982L63.84713992707384,24.09865470852018L64.30025068368276,24.29596412556054L64.7533614402917,23.668161434977577L65.20647219690063,24.313901345291477L65.65958295350957,24.726457399103133L67.01891522333636,24.780269058295964L67.4720259799453,24.941704035874437L68.37824749316317,25.049327354260086L68.83135824977211,25.37219730941704L70.19069051959892,25.62331838565022L70.64380127620782,25.69506726457399L71.09691203281676,25.713004484304932L71.55002278942571,25.89237668161435L72.00313354603465,25.28251121076233L73.36246581586144,25.69506726457399L73.81557657247038,25.426008968609864L74.2686873290793,25.69506726457399L75.17490884229717,25.659192825112104L76.53424111212398,25.103139013452914L76.98735186873292,25.7847533632287L77.44046262534185,25.67713004484305L77.89357338195077,25.049327354260086L78.34668413855971,25.174887892376677L79.7060164083865,24.923766816143495L80.15912716499545,24.869955156950674L80.61223792160439,24.905829596412556L81.06534867821331,25.3542600896861L81.51845943482223,25.533632286995513L82.87779170464904,25.049327354260086L83.33090246125798,24.582959641255602L83.78401321786691,25.964125560538115L84.23712397447585,25.641255605381165L84.69023473108477,25.121076233183857L86.04956700091158,24.99551569506726L86.50267775752052,24.905829596412556L86.95578851412944,25.605381165919283L87.40889927073837,27.004484304932728L87.86201002734731,28.134529147982065L89.2213422971741,28.905829596412556L89.67445305378305,27.955156950672645L90.12756381039198,32.81614349775785L90.58067456700091,32.062780269058294L91.03378532360985,32.90582959641256L92.39311759343664,32.654708520179376L92.84622835004556,32.42152466367713L93.29933910665451,32.85201793721973L93.75244986326345,31.991031390134527L94.20556061987237,32.47533632286996L95.56489288969918,31.147982062780265L96.0180036463081,31.847533632286993L96.47111440291704,31.399103139013448L96.92422515952599,31.90134529147982L97.37733591613491,31.04035874439462L98.73666818596172,31.381165919282513L99.18977894257064,31.04035874439462L99.64288969917958,31.524663677130043L100.0960004557885,31.09417040358744L100.54911121239745,31.201793721973093L102.36155423883318,32.618834080717484L102.81466499544212,32.152466367713L103.26777575205104,32.24215246636771L103.72088650865999,32.52914798206278L105.0802187784868,32.81614349775785L105.53332953509572,33.49775784753363L105.98644029170467,33.31838565022421L106.43955104831358,33.31838565022421L106.89266180492251,32.99551569506726L108.25199407474933,32.95964125560538L108.70510483135826,32.26008968609865L109.15821558796718,32.00896860986547L109.61132634457611,31.130044843049326L110.06443710118505,30.502242152466366L111.42376937101184,31.076233183856502L111.8768801276208,30.627802690582957L112.32999088422972,31.345291479820627L112.78310164083865,31.09417040358744L113.23621239744759,30.73542600896861L114.59554466727438,31.237668161434975L115.04865542388332,31.955156950672645L115.50176618049225,31.18385650224215L115.95487693710119,31.632286995515695L116.40798769371014,30.843049327354255L117.76731996353692,31.47085201793722L118.22043072014586,31.381165919282513L118.67354147675478,30.860986547085204L119.12665223336373,31.524663677130043L119.57976298997265,31.219730941704032L120.93909525979944,30.77130044843049L121.3922060164084,30.376681614349774L121.84531677301732,30.23318385650224L122.29842752962627,29.838565022421523L122.75153828623519,29.408071748878925L124.11087055606198,29.856502242152466L124.56398131267093,29.695067264573986L125.01709206927985,29.784753363228695L125.47020282588878,29.874439461883405L125.92331358249773,29.838565022421523L127.28264585232452,29.121076233183857L127.73575660893344,28.457399103139014L128.1888673655424,28.2780269058296L128.64197812215133,28.457399103139014L129.09508887876027,28.295964125560538L130.45442114858707,27.91928251121076L130.907531905196,27.65022421524664L131.36064266180492,25.999999999999996L131.81375341841388,29.497757847533627L132.2668641750228,29.443946188340806L133.62619644484957,30.68161434977578L134.07930720145853,31.650224215246634L134.53241795806744,31.399103139013448L134.98552871467638,31.076233183856502L135.4386394712853,32.22421524663677L136.79797174111212,32.493273542600896L137.25108249772106,33.139013452914796L137.70419325433,33.28251121076233L138.15730401093893,33.10313901345291L138.61041476754787,32.34977578475336L139.96974703737465,31.73991031390134L140.42285779398358,32.331838565022416L140.87596855059252,31.937219730941703L141.7821900638104,31.524663677130043L143.14152233363717,31.327354260089685L143.59463309024613,31.847533632286993L144.04774384685507,31.112107623318387L144.500854603464,31.991031390134527L144.95396536007294,31.524663677130043L146.31329762989972,32.09865470852018L146.76640838650866,32.152466367713L147.2195191431176,32.3677130044843L147.6726298997265,32.708520179372194L148.12574065633547,32.52914798206278L149.48507292616225,32.54708520179372L149.93818368277118,33.03139013452915L150.39129443938015,34L150.84440519598905,32.31390134529148L151.297515952598,32.493273542600896L152.6568482224248,32.00896860986547L153.10995897903373,31.381165919282513L154.01618049225158,31.381165919282513L154.46929124886051,31.130044843049326L155.82862351868732,30.502242152466366L156.28173427529626,30.73542600896861L157.18795578851413,30.340807174887892L157.64106654512307,30.340807174887892L159.00039881494988,29.910313901345287L159.45350957155878,29.695067264573986L159.90662032816775,30.179372197309412L160.81284184138562,31.757847533632287L162.1721741112124,31.506726457399104L162.6252848678213,30.6457399103139L163.07839562443027,29.856502242152466L163.5315063810392,29.1390134529148L163.98461713764812,28.475336322869953L165.79706016408386,28.708520179372194L166.2501709206928,28.995515695067265L166.70328167730173,25.06726457399103L167.15639243391067,25.551569506726455L168.51572470373745,25.533632286995513L168.96883546034638,25.192825112107624L169.42194621695532,25.408071748878925L169.87505697356426,25.874439461883405L170.3281677301732,25.730941704035875L171.6875,26.251121076233183" fill="transparent" stroke-linecap="round" stroke="#E64141" strokeWidth="1"></path><path className="visx-area-closed" d="M6.755184594348223,18.251121076233183L7.2082953509571555,18.59192825112108L7.661406107566089,18.340807174887892L8.114516864175023,16.78026905829596L8.567627620783956,18.286995515695065L9.926959890610757,17.103139013452914L10.38007064721969,11.560538116591925L10.833181403828624,11.811659192825108L11.286292160437558,7.614349775784751L11.73940291704649,9.246636771300448L13.551845943482224,8.941704035874434L14.004956700091158,9.659192825112106L14.45806745670009,8.798206278026903L14.911178213309025,8.224215246636769L16.270510483135823,8.690582959641258L16.72362123974476,8.421524663677127L17.17673199635369,9.1390134529148L17.629842752962624,9.121076233183857L18.08295350957156,8.511210762331835L19.44228577939836,8.744394618834075L19.895396536007294,9.408071748878923L20.348507292616226,9.210762331838563L20.80161804922516,10.017937219730939L21.25472880583409,9.587443946188342L22.614061075660896,9.51569506726457L23.06717183226983,9.228699551569502L23.52028258887876,9.408071748878923L23.973393345487693,8.99551569506726L24.426504102096626,8.188340807174884L25.785836371923427,7.327354260089684L26.23894712853236,7.578475336322868L26.692057885141296,6.914798206278022L27.145168641750228,6.394618834080716L27.59827939835916,6L28.957611668185965,6.717488789237666L29.410722424794894,7.022421524663678L29.86383318140383,7.273542600896856L30.316943938012763,7.381165919282509L32.12938696444849,7.560538116591923L32.58249772105743,7.506726457399105L33.035608477666365,7.596412556053806L33.488719234275294,8.690582959641258L33.94182999088423,8.367713004484305L35.30116226071103,8.708520179372194L35.75427301731997,8.941704035874434L36.207383773928896,9.766816143497753L36.66049453053783,8.78026905829596L37.11360528714677,9.26457399103139L38.47293755697356,11.524663677130041L38.9260483135825,12.008968609865468L39.379159070191434,11.66816143497758L39.83226982680036,11.937219730941703L40.28538058340929,12.313901345291477L41.64471285323609,11.381165919282509L42.09782360984504,10.37668161434977L42.550934366453966,10.32286995515695L43.004045123062895,10.161434977578475L43.45715587967183,7.991031390134529L44.81648814949864,8.798206278026903L45.26959890610757,10L45.7227096627165,10.017937219730939L46.17582041932543,9.605381165919278L46.62893117593437,10.968609865470851L47.98826344576116,11.488789237668161L48.4413742023701,11.524663677130041L48.894484958979035,24.65470852017937L49.34759571558797,24.385650224215247L49.80070647219691,24.618834080717487L51.1600387420237,23.793721973094165L51.61314949863264,22.699551569506724L52.06626025524156,23.345291479820624L52.519371011850495,23.70403587443946L52.97248176845944,24.762331838565018L54.33181403828623,24.13452914798206L54.78492479489517,24.600896860986545L55.238035551504105,24.260089686098656L55.691146308113034,25.3542600896861L56.14425706472196,25.139013452914792L57.95670009115771,25.08520179372197L58.409810847766636,25.06726457399103L58.86292160437557,25.06726457399103L59.3160323609845,24.313901345291477L60.6753646308113,24.47533632286995L61.12847538742024,24.905829596412556L61.581586144029174,25.264573991031387L62.03469690063811,24.13452914798206L62.48780765724703,23.90134529147982L63.84713992707384,24.09865470852018L64.30025068368276,24.29596412556054L64.7533614402917,23.668161434977577L65.20647219690063,24.313901345291477L65.65958295350957,24.726457399103133L67.01891522333636,24.780269058295964L67.4720259799453,24.941704035874437L68.37824749316317,25.049327354260086L68.83135824977211,25.37219730941704L70.19069051959892,25.62331838565022L70.64380127620782,25.69506726457399L71.09691203281676,25.713004484304932L71.55002278942571,25.89237668161435L72.00313354603465,25.28251121076233L73.36246581586144,25.69506726457399L73.81557657247038,25.426008968609864L74.2686873290793,25.69506726457399L75.17490884229717,25.659192825112104L76.53424111212398,25.103139013452914L76.98735186873292,25.7847533632287L77.44046262534185,25.67713004484305L77.89357338195077,25.049327354260086L78.34668413855971,25.174887892376677L79.7060164083865,24.923766816143495L80.15912716499545,24.869955156950674L80.61223792160439,24.905829596412556L81.06534867821331,25.3542600896861L81.51845943482223,25.533632286995513L82.87779170464904,25.049327354260086L83.33090246125798,24.582959641255602L83.78401321786691,25.964125560538115L84.23712397447585,25.641255605381165L84.69023473108477,25.121076233183857L86.04956700091158,24.99551569506726L86.50267775752052,24.905829596412556L86.95578851412944,25.605381165919283L87.40889927073837,27.004484304932728L87.86201002734731,28.134529147982065L89.2213422971741,28.905829596412556L89.67445305378305,27.955156950672645L90.12756381039198,32.81614349775785L90.58067456700091,32.062780269058294L91.03378532360985,32.90582959641256L92.39311759343664,32.654708520179376L92.84622835004556,32.42152466367713L93.29933910665451,32.85201793721973L93.75244986326345,31.991031390134527L94.20556061987237,32.47533632286996L95.56489288969918,31.147982062780265L96.0180036463081,31.847533632286993L96.47111440291704,31.399103139013448L96.92422515952599,31.90134529147982L97.37733591613491,31.04035874439462L98.73666818596172,31.381165919282513L99.18977894257064,31.04035874439462L99.64288969917958,31.524663677130043L100.0960004557885,31.09417040358744L100.54911121239745,31.201793721973093L102.36155423883318,32.618834080717484L102.81466499544212,32.152466367713L103.26777575205104,32.24215246636771L103.72088650865999,32.52914798206278L105.0802187784868,32.81614349775785L105.53332953509572,33.49775784753363L105.98644029170467,33.31838565022421L106.43955104831358,33.31838565022421L106.89266180492251,32.99551569506726L108.25199407474933,32.95964125560538L108.70510483135826,32.26008968609865L109.15821558796718,32.00896860986547L109.61132634457611,31.130044843049326L110.06443710118505,30.502242152466366L111.42376937101184,31.076233183856502L111.8768801276208,30.627802690582957L112.32999088422972,31.345291479820627L112.78310164083865,31.09417040358744L113.23621239744759,30.73542600896861L114.59554466727438,31.237668161434975L115.04865542388332,31.955156950672645L115.50176618049225,31.18385650224215L115.95487693710119,31.632286995515695L116.40798769371014,30.843049327354255L117.76731996353692,31.47085201793722L118.22043072014586,31.381165919282513L118.67354147675478,30.860986547085204L119.12665223336373,31.524663677130043L119.57976298997265,31.219730941704032L120.93909525979944,30.77130044843049L121.3922060164084,30.376681614349774L121.84531677301732,30.23318385650224L122.29842752962627,29.838565022421523L122.75153828623519,29.408071748878925L124.11087055606198,29.856502242152466L124.56398131267093,29.695067264573986L125.01709206927985,29.784753363228695L125.47020282588878,29.874439461883405L125.92331358249773,29.838565022421523L127.28264585232452,29.121076233183857L127.73575660893344,28.457399103139014L128.1888673655424,28.2780269058296L128.64197812215133,28.457399103139014L129.09508887876027,28.295964125560538L130.45442114858707,27.91928251121076L130.907531905196,27.65022421524664L131.36064266180492,25.999999999999996L131.81375341841388,29.497757847533627L132.2668641750228,29.443946188340806L133.62619644484957,30.68161434977578L134.07930720145853,31.650224215246634L134.53241795806744,31.399103139013448L134.98552871467638,31.076233183856502L135.4386394712853,32.22421524663677L136.79797174111212,32.493273542600896L137.25108249772106,33.139013452914796L137.70419325433,33.28251121076233L138.15730401093893,33.10313901345291L138.61041476754787,32.34977578475336L139.96974703737465,31.73991031390134L140.42285779398358,32.331838565022416L140.87596855059252,31.937219730941703L141.7821900638104,31.524663677130043L143.14152233363717,31.327354260089685L143.59463309024613,31.847533632286993L144.04774384685507,31.112107623318387L144.500854603464,31.991031390134527L144.95396536007294,31.524663677130043L146.31329762989972,32.09865470852018L146.76640838650866,32.152466367713L147.2195191431176,32.3677130044843L147.6726298997265,32.708520179372194L148.12574065633547,32.52914798206278L149.48507292616225,32.54708520179372L149.93818368277118,33.03139013452915L150.39129443938015,34L150.84440519598905,32.31390134529148L151.297515952598,32.493273542600896L152.6568482224248,32.00896860986547L153.10995897903373,31.381165919282513L154.01618049225158,31.381165919282513L154.46929124886051,31.130044843049326L155.82862351868732,30.502242152466366L156.28173427529626,30.73542600896861L157.18795578851413,30.340807174887892L157.64106654512307,30.340807174887892L159.00039881494988,29.910313901345287L159.45350957155878,29.695067264573986L159.90662032816775,30.179372197309412L160.81284184138562,31.757847533632287L162.1721741112124,31.506726457399104L162.6252848678213,30.6457399103139L163.07839562443027,29.856502242152466L163.5315063810392,29.1390134529148L163.98461713764812,28.475336322869953L165.79706016408386,28.708520179372194L166.2501709206928,28.995515695067265L166.70328167730173,25.06726457399103L167.15639243391067,25.551569506726455L168.51572470373745,25.533632286995513L168.96883546034638,25.192825112107624L169.42194621695532,25.408071748878925L169.87505697356426,25.874439461883405L170.3281677301732,25.730941704035875L171.6875,26.251121076233183L171.6875,46L170.3281677301732,46L169.87505697356426,46L169.42194621695532,46L168.96883546034638,46L168.51572470373745,46L167.15639243391067,46L166.70328167730173,46L166.2501709206928,46L165.79706016408386,46L163.98461713764812,46L163.5315063810392,46L163.07839562443027,46L162.6252848678213,46L162.1721741112124,46L160.81284184138562,46L159.90662032816775,46L159.45350957155878,46L159.00039881494988,46L157.64106654512307,46L157.18795578851413,46L156.28173427529626,46L155.82862351868732,46L154.46929124886051,46L154.01618049225158,46L153.10995897903373,46L152.6568482224248,46L151.297515952598,46L150.84440519598905,46L150.39129443938015,46L149.93818368277118,46L149.48507292616225,46L148.12574065633547,46L147.6726298997265,46L147.2195191431176,46L146.76640838650866,46L146.31329762989972,46L144.95396536007294,46L144.500854603464,46L144.04774384685507,46L143.59463309024613,46L143.14152233363717,46L141.7821900638104,46L140.87596855059252,46L140.42285779398358,46L139.96974703737465,46L138.61041476754787,46L138.15730401093893,46L137.70419325433,46L137.25108249772106,46L136.79797174111212,46L135.4386394712853,46L134.98552871467638,46L134.53241795806744,46L134.07930720145853,46L133.62619644484957,46L132.2668641750228,46L131.81375341841388,46L131.36064266180492,46L130.907531905196,46L130.45442114858707,46L129.09508887876027,46L128.64197812215133,46L128.1888673655424,46L127.73575660893344,46L127.28264585232452,46L125.92331358249773,46L125.47020282588878,46L125.01709206927985,46L124.56398131267093,46L124.11087055606198,46L122.75153828623519,46L122.29842752962627,46L121.84531677301732,46L121.3922060164084,46L120.93909525979944,46L119.57976298997265,46L119.12665223336373,46L118.67354147675478,46L118.22043072014586,46L117.76731996353692,46L116.40798769371014,46L115.95487693710119,46L115.50176618049225,46L115.04865542388332,46L114.59554466727438,46L113.23621239744759,46L112.78310164083865,46L112.32999088422972,46L111.8768801276208,46L111.42376937101184,46L110.06443710118505,46L109.61132634457611,46L109.15821558796718,46L108.70510483135826,46L108.25199407474933,46L106.89266180492251,46L106.43955104831358,46L105.98644029170467,46L105.53332953509572,46L105.0802187784868,46L103.72088650865999,46L103.26777575205104,46L102.81466499544212,46L102.36155423883318,46L100.54911121239745,46L100.0960004557885,46L99.64288969917958,46L99.18977894257064,46L98.73666818596172,46L97.37733591613491,46L96.92422515952599,46L96.47111440291704,46L96.0180036463081,46L95.56489288969918,46L94.20556061987237,46L93.75244986326345,46L93.29933910665451,46L92.84622835004556,46L92.39311759343664,46L91.03378532360985,46L90.58067456700091,46L90.12756381039198,46L89.67445305378305,46L89.2213422971741,46L87.86201002734731,46L87.40889927073837,46L86.95578851412944,46L86.50267775752052,46L86.04956700091158,46L84.69023473108477,46L84.23712397447585,46L83.78401321786691,46L83.33090246125798,46L82.87779170464904,46L81.51845943482223,46L81.06534867821331,46L80.61223792160439,46L80.15912716499545,46L79.7060164083865,46L78.34668413855971,46L77.89357338195077,46L77.44046262534185,46L76.98735186873292,46L76.53424111212398,46L75.17490884229717,46L74.2686873290793,46L73.81557657247038,46L73.36246581586144,46L72.00313354603465,46L71.55002278942571,46L71.09691203281676,46L70.64380127620782,46L70.19069051959892,46L68.83135824977211,46L68.37824749316317,46L67.4720259799453,46L67.01891522333636,46L65.65958295350957,46L65.20647219690063,46L64.7533614402917,46L64.30025068368276,46L63.84713992707384,46L62.48780765724703,46L62.03469690063811,46L61.581586144029174,46L61.12847538742024,46L60.6753646308113,46L59.3160323609845,46L58.86292160437557,46L58.409810847766636,46L57.95670009115771,46L56.14425706472196,46L55.691146308113034,46L55.238035551504105,46L54.78492479489517,46L54.33181403828623,46L52.97248176845944,46L52.519371011850495,46L52.06626025524156,46L51.61314949863264,46L51.1600387420237,46L49.80070647219691,46L49.34759571558797,46L48.894484958979035,46L48.4413742023701,46L47.98826344576116,46L46.62893117593437,46L46.17582041932543,46L45.7227096627165,46L45.26959890610757,46L44.81648814949864,46L43.45715587967183,46L43.004045123062895,46L42.550934366453966,46L42.09782360984504,46L41.64471285323609,46L40.28538058340929,46L39.83226982680036,46L39.379159070191434,46L38.9260483135825,46L38.47293755697356,46L37.11360528714677,46L36.66049453053783,46L36.207383773928896,46L35.75427301731997,46L35.30116226071103,46L33.94182999088423,46L33.488719234275294,46L33.035608477666365,46L32.58249772105743,46L32.12938696444849,46L30.316943938012763,46L29.86383318140383,46L29.410722424794894,46L28.957611668185965,46L27.59827939835916,46L27.145168641750228,46L26.692057885141296,46L26.23894712853236,46L25.785836371923427,46L24.426504102096626,46L23.973393345487693,46L23.52028258887876,46L23.06717183226983,46L22.614061075660896,46L21.25472880583409,46L20.80161804922516,46L20.348507292616226,46L19.895396536007294,46L19.44228577939836,46L18.08295350957156,46L17.629842752962624,46L17.17673199635369,46L16.72362123974476,46L16.270510483135823,46L14.911178213309025,46L14.45806745670009,46L14.004956700091158,46L13.551845943482224,46L11.73940291704649,46L11.286292160437558,46L10.833181403828624,46L10.38007064721969,46L9.926959890610757,46L8.567627620783956,46L8.114516864175023,46L7.661406107566089,46L7.2082953509571555,46L6.755184594348223,46Z" fill="url(#negative-chart)" fill-opacity="0.2"></path></svg></svg>
                </div>
                <div className='info-final-container'>
                  <div className='info-final-container1'>
                    <div className='cell-container'>
                      <p className='cell top'>UPDATED</p>
                    </div>
                    <div className='cell-container'>
                      <p className='cell right'>{formatDate()}</p>
                    </div>
                  </div>
                  <div className='info-final-container1'>
                    <div className='cell-container'>
                      <p className='cell top'>AI Recommendation</p>
                    </div>
                    <div className='cell-container'>
                      <p className='cell right'>Long Tripadvisor (TRIP)</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div className='detail-body-container container'>
        <div className='detail-sidebar-container'>
          <div className='sidebar-container'>
            <section className='sidebar-snowflake-wrapper'>
              <div className='sidebar-snowflake'>
                <div className='snowflake-container1'>
                  <div className='snowflake-container2'>
                    <div className='snowflake-contaner3'>
                      <div className='snowflake-container4'>
                        <div className='canvas-wrapper'>
                          <canvas width="288" height="288"></canvas>
                        </div>
                        <div className='svg-wrapper'>
                          <svg width="100%" viewBox="0 0 240 240" fill="none"><g transform="translate(0 2)"><path fill="#FFFFFF" d="M104.414 8.87181L105.614 1.95417L107.24 1.7169L105.391 10.6068L103.961 10.8126L99.7113 2.79367L101.322 2.55652L104.414 8.87181Z"></path><path fill="#FFFFFF" d="M114.142 7.74834L110.828 7.99804L110.286 10.0296L108.734 10.1312L111.337 1.37086L112.663 1.286L116.522 9.56314L114.986 9.67959L114.142 7.74834ZM111.151 6.7641L113.636 6.58058L112.134 3.13725L111.151 6.7641Z"></path><path fill="#FFFFFF" d="M119.665 8.26608L123.554 8.25125L123.562 9.4378L118.181 9.46635L118.151 0.91969L119.643 0.920982L119.665 8.26608Z"></path><path fill="#FFFFFF" d="M132.244 1.42657L131.894 7.12139C131.841 8.02293 131.499 8.73135 130.885 9.21649C130.271 9.71664 129.473 9.93278 128.508 9.8648C127.528 9.81195 126.772 9.50211 126.225 8.93542C125.679 8.38374 125.432 7.6346 125.5 6.71793L125.85 1.02311L127.328 1.11735L126.978 6.82719C126.937 7.39822 127.061 7.84788 127.335 8.16127C127.609 8.47465 128.032 8.65176 128.59 8.69271C129.736 8.75936 130.35 8.19913 130.416 6.99711L130.766 1.34734L132.244 1.42657Z"></path><path fill="#FFFFFF" d="M139.55 7.08018L136.065 6.61023L135.722 9.21106L139.796 9.75177L139.639 10.9244L134.087 10.1994L135.214 1.73528L140.736 2.46056L140.564 3.64834L136.521 3.12243L136.207 5.46772L139.692 5.92266L139.55 7.08018Z"></path></g><g transform="translate(4.4 -1.7) rotate(0.4)"><path fill="#FFFFFF" d="M8.95363 114.171L0.490265 113.412L0.714163 110.928C0.77387 110.184 1.01269 109.53 1.38586 108.995C1.77395 108.444 2.28145 108.043 2.9233 107.775C3.56514 107.507 4.28161 107.418 5.07272 107.492L5.49067 107.522C6.2967 107.596 6.98332 107.82 7.56546 108.191C8.1476 108.563 8.56554 109.054 8.84914 109.679C9.13275 110.303 9.23724 110.988 9.1626 111.746L8.95363 114.171ZM1.8038 112.059L7.89384 112.594L7.9834 111.642C8.04311 110.869 7.86399 110.259 7.41619 109.813C6.9684 109.366 6.2967 109.084 5.40111 109.009L4.92346 108.965C4.01294 108.89 3.28153 109.024 2.77403 109.381C2.2516 109.738 1.968 110.289 1.89336 111.047L1.8038 112.059Z"></path><path fill="#FFFFFF" d="M10.0433 104.205L9.83437 105.648L1.43071 104.428L1.63968 102.986L10.0433 104.205Z"></path><path fill="#FFFFFF" d="M9.20727 98.3897L3.13215 94.9688L3.46054 93.3922L11.1776 98.0625L10.894 99.4606L1.96788 100.74L2.29626 99.1631L9.20727 98.3897Z"></path><path fill="#FFFFFF" d="M12.6407 91.9347L12.2675 93.3477L4.05791 91.191L4.43107 89.778L12.6407 91.9347Z"></path><path fill="#FFFFFF" d="M13.2973 89.4656L5.22203 86.8479L5.99821 84.4681C6.23704 83.7542 6.59528 83.1741 7.08785 82.7279C7.58043 82.2817 8.17749 81.9991 8.86411 81.895C9.55074 81.776 10.2672 81.8504 11.0135 82.0883L11.4166 82.2222C12.1778 82.4751 12.8047 82.8469 13.2824 83.3377C13.76 83.8285 14.0735 84.4086 14.2078 85.0779C14.3422 85.7472 14.2825 86.4314 14.0436 87.1602L13.2973 89.4656ZM6.81917 85.8067L12.6405 87.6957L12.9391 86.7884C13.1779 86.0596 13.1331 85.42 12.8047 84.8697C12.4763 84.3194 11.8793 83.9178 11.0135 83.6352L10.5657 83.4865C9.68508 83.2039 8.95367 83.1741 8.37154 83.4121C7.7894 83.6352 7.37146 84.1111 7.13263 84.8399L6.81917 85.8067Z"></path><path fill="#FFFFFF" d="M14.372 75.4547L13.0585 78.6674L15.4766 79.649L17.014 75.886L18.1037 76.3322L16.014 81.4636L8.14766 78.2806L10.2225 73.1939L11.327 73.6401L9.80451 77.3585L11.9838 78.236L13.2973 75.0233L14.372 75.4547Z"></path><path fill="#FFFFFF" d="M21.8648 68.598L21.208 69.9218L14.1328 70.6357L19.5362 73.2981L18.8795 74.6218L11.2818 70.8588L11.9386 69.5351L19.0437 68.8212L13.6253 66.1439L14.2821 64.8351L21.8648 68.598Z"></path><path fill="#FFFFFF" d="M23.0741 66.4265L15.7899 62.0834L17.0736 59.9416C17.4617 59.3021 17.9394 58.8112 18.5364 58.4989C19.1186 58.1717 19.7604 58.0378 20.447 58.0676C21.1336 58.0973 21.8203 58.3353 22.5069 58.7369L22.8651 58.96C23.5517 59.3764 24.0742 59.8673 24.4324 60.4622C24.7907 61.0571 24.9548 61.6818 24.9399 62.3511C24.925 63.0204 24.716 63.6898 24.313 64.3442L23.0741 66.4265ZM17.5662 61.429L22.8203 64.5673L23.3129 63.7493C23.7159 63.0948 23.8055 62.4553 23.6115 61.8603C23.4025 61.2654 22.9248 60.7151 22.1487 60.254L21.7456 60.016C20.9545 59.54 20.253 59.3616 19.6261 59.4508C18.9991 59.54 18.4916 59.9119 18.1036 60.5663L17.5662 61.429Z"></path></g><g transform="translate(-4 -1)"><path fill="#FFFFFF" d="M223.523 68.4198L221.896 65.4302L218.732 67.1406L218.03 65.8466L225.493 61.8159L228.061 66.5457L227.016 67.1109L225.15 63.6751L222.926 64.8799L224.553 67.8694L223.523 68.4198Z"></path><path fill="#FFFFFF" d="M231.763 74.4285L226.598 76.7637C225.777 77.1355 225.001 77.1653 224.284 76.8529C223.568 76.5406 223.016 75.9605 222.613 75.083C222.21 74.2054 222.135 73.3874 222.359 72.6586C222.583 71.9298 223.135 71.3646 223.971 70.9928L229.136 68.6576L229.748 69.9962L224.583 72.3314C224.061 72.5694 223.732 72.8817 223.583 73.2535C223.434 73.6254 223.463 74.0864 223.702 74.5921C224.165 75.6184 224.956 75.8861 226.046 75.3953L231.181 73.0751L231.763 74.4285Z"></path><path fill="#FFFFFF" d="M233.867 83.323L232.957 80.854L226.105 83.3676L225.598 81.9992L232.449 79.4856L231.539 77.0315L232.658 76.6299L234.972 82.9363L233.867 83.323Z"></path><path fill="#FFFFFF" d="M237.45 91.2506L231.987 92.7974C231.121 93.0503 230.36 92.9611 229.688 92.5446C229.016 92.1281 228.554 91.4737 228.3 90.5515C228.031 89.6145 228.076 88.8113 228.419 88.1272C228.763 87.443 229.375 86.967 230.27 86.7142L235.718 85.1673L236.121 86.5803L230.658 88.1272C230.106 88.2759 229.733 88.5436 229.524 88.9006C229.315 89.2575 229.285 89.7037 229.434 90.2392C229.748 91.325 230.479 91.7117 231.628 91.3845L237.047 89.8525L237.45 91.2506Z"></path><path fill="#FFFFFF" d="M233.658 98.256L233.33 96.6497L230.135 97.3041L229.837 95.8614L238.151 94.1658L238.748 97.081C238.942 98.0329 238.882 98.8212 238.554 99.4311C238.226 100.041 237.658 100.428 236.838 100.591C236.285 100.71 235.793 100.666 235.36 100.472C234.927 100.279 234.569 99.9665 234.27 99.5352L231.18 102.108L231.106 102.123L230.792 100.576L233.658 98.256ZM234.494 96.4266L234.793 97.914C234.897 98.4048 235.091 98.7469 235.39 98.97C235.688 99.1931 236.061 99.2674 236.479 99.1782C236.927 99.089 237.241 98.8956 237.435 98.5833C237.629 98.2858 237.673 97.8842 237.584 97.3785L237.27 95.8614L234.494 96.4266Z"></path><path fill="#FFFFFF" d="M235.778 108.296L235.315 104.845L232.733 105.187L233.27 109.218L232.106 109.366L231.374 103.878L239.793 102.778L240.509 108.221L239.33 108.37L238.808 104.384L236.479 104.696L236.927 108.147L235.778 108.296Z"></path></g><g transform="translate(3 -5)"><path fill="#FFFFFF" d="M35.9111 207.026L34.8961 205.97L37.6127 203.367L34.9856 200.645L32.269 203.248L31.2391 202.192L37.359 196.332L38.374 197.388L35.8215 199.827L38.4486 202.549L41.001 200.11L42.0161 201.166L35.9111 207.026Z"></path><path fill="#FFFFFF" d="M44.3297 209.584L41.7325 207.264L39.9861 209.197L43.0162 211.904L42.2251 212.782L38.0904 209.093L43.7625 202.802L47.8673 206.476L47.0762 207.353L44.076 204.661L42.5087 206.401L45.1059 208.721L44.3297 209.584Z"></path><path fill="#FFFFFF" d="M49.3453 215.905L46.7481 213.898L45.0017 215.043L43.7777 214.106L51.5097 209.361L52.5545 210.164L49.8976 218.821L48.6736 217.884L49.3453 215.905ZM47.793 213.213L49.7334 214.716L50.9126 211.191L47.793 213.213Z"></path><path fill="#FFFFFF" d="M53.6438 219.936L56.853 222.063L56.1963 223.045L51.7631 220.1L56.4799 213.064L57.7038 213.882L53.6438 219.936Z"></path><path fill="#FFFFFF" d="M66.3167 220.561L64.0329 219.222L60.346 225.499L59.0773 224.755L62.7641 218.479L60.4953 217.155L61.0924 216.129L66.8988 219.52L66.3167 220.561Z"></path><path fill="#FFFFFF" d="M70.7946 230.913L69.4811 230.273L71.1379 226.897L67.7197 225.231L66.0629 228.607L64.7344 227.968L68.4511 220.367L69.7796 221.007L68.2272 224.175L71.6454 225.841L73.1978 222.673L74.5113 223.312L70.7946 230.913Z"></path></g><g transform="translate(-2.3 -5.6)"><path fill="#FFFFFF" d="M178.37 223.461L179.953 226.183L178.669 226.927L174.415 219.609L177.221 217.988C178.042 217.512 178.818 217.348 179.55 217.497C180.281 217.646 180.848 218.062 181.251 218.776C181.669 219.49 181.759 220.189 181.52 220.858C181.281 221.528 180.729 222.108 179.878 222.599L178.37 223.461ZM177.773 222.435L179.311 221.543C179.759 221.275 180.057 220.977 180.162 220.62C180.281 220.263 180.221 219.892 179.983 219.49C179.759 219.088 179.445 218.85 179.072 218.746C178.699 218.657 178.296 218.717 177.863 218.955L176.296 219.862L177.773 222.435Z"></path><path fill="#FFFFFF" d="M188.61 218.434L185.878 220.263L186.416 222.271L185.147 223.134L183.042 214.329L184.132 213.585L191.55 218.806L190.282 219.668L188.61 218.434ZM185.565 219.059L187.61 217.69L184.625 215.474L185.565 219.059Z"></path><path fill="#FFFFFF" d="M195.417 213.064C195.193 212.767 194.909 212.633 194.581 212.633C194.252 212.633 193.745 212.767 193.088 213.035C192.416 213.302 191.849 213.451 191.386 213.496C190.476 213.585 189.774 213.332 189.297 212.722C188.879 212.187 188.744 211.577 188.909 210.878C189.073 210.194 189.506 209.569 190.207 209.019C190.67 208.662 191.148 208.409 191.655 208.305C192.148 208.186 192.625 208.216 193.088 208.364C193.551 208.513 193.924 208.781 194.223 209.168L193.073 210.075C192.805 209.733 192.476 209.539 192.103 209.51C191.73 209.48 191.342 209.629 190.939 209.956C190.566 210.253 190.327 210.566 190.252 210.893C190.177 211.22 190.237 211.532 190.476 211.815C190.67 212.053 190.939 212.172 191.297 212.157C191.655 212.142 192.148 212.008 192.79 211.756C193.431 211.503 193.984 211.354 194.461 211.294C194.939 211.25 195.342 211.294 195.685 211.428C196.029 211.562 196.342 211.8 196.611 212.142C197.044 212.693 197.178 213.302 197.014 213.972C196.85 214.641 196.402 215.251 195.67 215.831C195.193 216.203 194.67 216.47 194.133 216.604C193.581 216.738 193.073 216.738 192.61 216.604C192.133 216.47 191.745 216.188 191.401 215.771L192.566 214.864C192.864 215.236 193.222 215.429 193.64 215.444C194.058 215.459 194.491 215.281 194.969 214.909C195.372 214.596 195.611 214.269 195.685 213.957C195.7 213.63 195.641 213.332 195.417 213.064Z"></path><path fill="#FFFFFF" d="M199.537 202.698L197.581 204.468L202.492 209.852L201.403 210.834L196.492 205.449L194.551 207.204L193.745 206.327L198.731 201.82L199.537 202.698Z"></path></g></svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div className='snowflake-detail'>
                <div className='snowflake-wrapper'>
                  <p className='company-name'>{stockDetail.name}, Inc.
                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" className="sc-h7xi2g-0 gedxnB"><path fillRule="evenodd" d="M9 3h10a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-1V7a2 2 0 0 0-2-2H8V4a1 1 0 0 1 1-1Zm9 16v-1h1a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2ZM16 6H6a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1Zm-8.005 8.591.707-.707a1 1 0 0 1 .966-.259l-.259.26a.5.5 0 1 0 .707.706l.26-.259a1 1 0 0 1-.26.966l-.707.707a1 1 0 1 1-1.414-1.414Zm0-1.414a2.001 2.001 0 0 1 2.43-.309l.443-.443a2.001 2.001 0 0 1 .309-2.43l.707-.707a2 2 0 0 1 2.828 2.828l-.707.707a2.001 2.001 0 0 1-2.43.31l-.443.442c.453.767.35 1.772-.309 2.43l-.707.708a2 2 0 0 1-2.828-2.829l.707-.707Zm4.596-1.06-.259.258a1 1 0 0 0 .966-.259l.707-.707a1 1 0 0 0-1.414-1.414l-.707.707a1 1 0 0 0-.259.966l.259-.259a.5.5 0 1 1 .707.707Z" clipRule="evenodd"></path></svg></span>
                  </p>
                  <p className='snowflake-text title'>{stockDetail.description}</p>
                  <p className='snowflake-text market-cup'>Market Cap: US${stockDetail.market_cap}</p>
                </div>
                <section className='watchlist-sidebar'>
                  <button className='stock-header-button watchlist'>
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" data-cy-id="outline-star" opacity="1" role="presentation" className="sc-1fw3rv4-0 fNZXbt"><path fillRule="evenodd" clipRule="evenodd" d="M13.3997 10.4935L12.0001 6.21582L10.6004 10.4935L6.09517 10.4935L9.73999 13.1232L8.34319 17.3922L12.0001 14.7538L15.6569 17.3922L14.2601 13.1232L17.9049 10.4935H13.3997ZM9.87544 9.49352H6.09517C5.12476 9.49352 4.72311 10.7367 5.51007 11.3045L8.56236 13.5067L7.39277 17.0813C7.09173 18.0013 8.14321 18.7696 8.92829 18.2032L12.0001 15.9869L15.0718 18.2032C15.8569 18.7696 16.9084 18.0013 16.6073 17.0813L15.4377 13.5067L18.49 11.3045C19.277 10.7367 18.8753 9.49352 17.9049 9.49352H14.1247L12.9505 5.90485C12.6499 4.98614 11.3502 4.98614 11.0496 5.90485L9.87544 9.49352Z"></path></svg>
                    Add to watchlist
                  </button>
                  <button className='stock-header-button other download'>
                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" className="sc-9nudij-0 bwXXkQ"><path fillRule="evenodd" clipRule="evenodd" d="M6 12C6 11.4477 6.44772 11 7 11C7.55228 11 8 11.4477 8 12C8 12.5523 7.55228 13 7 13C6.44772 13 6 12.5523 6 12ZM11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12ZM17 11C16.4477 11 16 11.4477 16 12C16 12.5523 16.4477 13 17 13C17.5523 13 18 12.5523 18 12C18 11.4477 17.5523 11 17 11Z"></path></svg>
                  </button>
                </section>
              </div>
              <div className='nav-bar-wrapper'>
                <nav className='nav-bar'>
                  {navItems.map(item => (
                    <ul key={item.id}>
                      <li onClick={() => handleNavClick(item.id)} className={activeItem === item.id ? 'clicked' : ''}>
                        <a>
                          <label>{item.id}</label>
                          {item.label}
                        </a>
                      </li>
                    </ul>
                  ))}
                </nav>
              </div>
            </section>
          </div>
        </div>
        <div className='company-detail'>
          <article className='company-report'>
            <div className='detail-section-container'>
              <section className='detail-section' ref={el => sectionsRef.current[0] = el}>
                {stockDetail.detail && stockDetail.detail
                  .filter(detail_text => detail_text.category === 'company')
                  .map((detail_text, index) => (
                    <>
                      {index > 0 && <hr />}
                      <div className='outline'>
                        <h2 className={`header-section ${index === 0 ? 'parent' : 'child'} index`}>{index === 0 ? 1 : `1.${index}`}</h2>
                        <h2 className={`header-section ${index === 0 ? 'parent' : 'child'}`}>{detail_text.title}</h2>
                      </div>
                      <p dangerouslySetInnerHTML={{ __html: detail_text.content.replace(/\n/g, '<br>') }} />
                    </>
                  ))}
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[1] = el}>
                <div className='outline'>
                  <h2 className='header-section parent index'>2</h2>
                  <h2 className='header-section parent'>AI Advisor</h2>
                </div>
                {iframeShow && (
                  <div className="aichat-container">
                    <div className="aichat-header">
                      <div className="aichat-headerbar">
                        <svg width="15" height="15" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <path d="M17.6562 11.7478L12.9799 10.0238L11.2521 5.34375C11.12 4.98542 10.8812 4.67621 10.5679 4.45781C10.2546 4.2394 9.88186 4.12231 9.49994 4.12231C9.11803 4.12231 8.7453 4.2394 8.43199 4.45781C8.11869 4.67621 7.87988 4.98542 7.74775 5.34375L6.02369 10.0238L1.34369 11.7478C0.98536 11.8799 0.676151 12.1187 0.457749 12.432C0.239347 12.7454 0.122253 13.1181 0.122253 13.5C0.122253 13.8819 0.239347 14.2546 0.457749 14.568C0.676151 14.8813 0.98536 15.1201 1.34369 15.2522L6.01994 16.9762L7.74775 21.6562C7.87988 22.0146 8.11869 22.3238 8.43199 22.5422C8.7453 22.7606 9.11803 22.8777 9.49994 22.8777C9.88186 22.8777 10.2546 22.7606 10.5679 22.5422C10.8812 22.3238 11.12 22.0146 11.2521 21.6562L12.9762 16.98L17.6562 15.2522C18.0145 15.1201 18.3237 14.8813 18.5421 14.568C18.7605 14.2546 18.8776 13.8819 18.8776 13.5C18.8776 13.1181 18.7605 12.7454 18.5421 12.432C18.3237 12.1187 18.0145 11.8799 17.6562 11.7478ZM11.7143 15.0441C11.5616 15.1003 11.4229 15.1891 11.3079 15.3042C11.1928 15.4192 11.104 15.5579 11.0478 15.7106L9.49994 19.9012L7.95588 15.7106C7.8996 15.5579 7.81086 15.4192 7.69578 15.3042C7.5807 15.1891 7.44202 15.1003 7.28932 15.0441L3.09869 13.5L7.28932 11.9559C7.44202 11.8997 7.5807 11.8109 7.69578 11.6958C7.81086 11.5808 7.8996 11.4421 7.95588 11.2894L9.49994 7.09875L11.044 11.2894C11.1003 11.4421 11.189 11.5808 11.3041 11.6958C11.4192 11.8109 11.5579 11.8997 11.7106 11.9559L15.9012 13.5L11.7143 15.0441ZM12.1249 3.75C12.1249 3.45163 12.2435 3.16548 12.4544 2.9545C12.6654 2.74353 12.9516 2.625 13.2499 2.625H14.3749V1.5C14.3749 1.20163 14.4935 0.915483 14.7044 0.704505C14.9154 0.493526 15.2016 0.375 15.4999 0.375C15.7983 0.375 16.0845 0.493526 16.2954 0.704505C16.5064 0.915483 16.6249 1.20163 16.6249 1.5V2.625H17.7499C18.0483 2.625 18.3345 2.74353 18.5454 2.9545C18.7564 3.16548 18.8749 3.45163 18.8749 3.75C18.8749 4.04837 18.7564 4.33452 18.5454 4.5455C18.3345 4.75647 18.0483 4.875 17.7499 4.875H16.6249V6C16.6249 6.29837 16.5064 6.58452 16.2954 6.7955C16.0845 7.00647 15.7983 7.125 15.4999 7.125C15.2016 7.125 14.9154 7.00647 14.7044 6.7955C14.4935 6.58452 14.3749 6.29837 14.3749 6V4.875H13.2499C12.9516 4.875 12.6654 4.75647 12.4544 4.5455C12.2435 4.33452 12.1249 4.04837 12.1249 3.75ZM22.6249 8.25C22.6249 8.54837 22.5064 8.83452 22.2954 9.0455C22.0845 9.25647 21.7983 9.375 21.4999 9.375H21.1249V9.75C21.1249 10.0484 21.0064 10.3345 20.7954 10.5455C20.5845 10.7565 20.2983 10.875 19.9999 10.875C19.7016 10.875 19.4154 10.7565 19.2044 10.5455C18.9935 10.3345 18.8749 10.0484 18.8749 9.75V9.375H18.4999C18.2016 9.375 17.9154 9.25647 17.7044 9.0455C17.4935 8.83452 17.3749 8.54837 17.3749 8.25C17.3749 7.95163 17.4935 7.66548 17.7044 7.4545C17.9154 7.24353 18.2016 7.125 18.4999 7.125H18.8749V6.75C18.8749 6.45163 18.9935 6.16548 19.2044 5.9545C19.4154 5.74353 19.7016 5.625 19.9999 5.625C20.2983 5.625 20.5845 5.74353 20.7954 5.9545C21.0064 6.16548 21.1249 6.45163 21.1249 6.75V7.125H21.4999C21.7983 7.125 22.0845 7.24353 22.2954 7.4545C22.5064 7.66548 22.6249 7.95163 22.6249 8.25Z" fill="#7600BC" />
                        </svg>
                        <span>Ask our AI Stock Bot:</span>
                      </div>
                    </div>
                    <iframe
                      id="chat-bot-container"
                      src="https://chainlit-llm-polished-sun-2054.fly.dev/"
                      width="100%"
                      height="600px"
                      title="Embedded Webpage"
                      style={{ border: 'none' }}
                    />
                  </div>
                )}
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[2] = el}>
                {stockDetail.detail && stockDetail.detail
                  .filter(detail_text => detail_text.category === 'core')
                  .map((detail_text, index) => (
                    <>
                      {index > 0 && <hr />}
                      <div className='outline'>
                        <h2 className={`header-section ${index === 0 ? 'parent' : 'child'} index`}>{index === 0 ? 3 : `3.${index}`}</h2>
                        <h2 className={`header-section ${index === 0 ? 'parent' : 'child'}`}>{detail_text.title}</h2>
                      </div>
                      <p dangerouslySetInnerHTML={{ __html: detail_text.content.replace(/\n/g, '<br>') }} />
                    </>
                  ))}
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[3] = el}>
                <div className='outline'>
                  <h2 className='header-section parent index'>4</h2>
                  <h2 className='header-section parent'>Alternative Data / Signals</h2>
                </div>
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[4] = el}>
                <div className='outline'>
                  <h2 className='header-section parent index'>5</h2>
                  <h2 className='header-section parent'>Counterpoints</h2>
                </div>
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[5] = el}>
                <div className='outline'>
                  <h2 className='header-section parent index'>6</h2>
                  <h2 className='header-section parent'>Download Full Stock Pitch</h2>
                </div>
              </section>
              <section className='detail-section' ref={el => sectionsRef.current[6] = el}>
                <div className='outline'>
                  <h2 className='header-section parent index'>7</h2>
                  <h2 className='header-section parent'>User Comments</h2>
                </div>
                <FastCommentsCommentWidget tenantId="demo" />
              </section>
            </div>
          </article>
        </div>
      </div>
    </>
  )
}

export default StockDetail;
